<?xml version="1.0" encoding="utf-8"?>
<acrn-config>
  <hv>
    <BUILD_TYPE>debug</BUILD_TYPE>
    <FEATURES>
      <IVSHMEM>
        <IVSHMEM_REGION>
          <NAME>cf_ivc1</NAME>
          <PROVIDED_BY>Hypervisor</PROVIDED_BY>
          <IVSHMEM_SIZE>256</IVSHMEM_SIZE>
          <IVSHMEM_VMS>
            <IVSHMEM_VM>
              <VM_NAME>Service_VM</VM_NAME>
              <VBDF>00:10.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>Vehicle_VM</VM_NAME>
              <VBDF>00:10.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>AD_VM</VM_NAME>
              <VBDF>00:10.0</VBDF>
            </IVSHMEM_VM>
          </IVSHMEM_VMS>
        </IVSHMEM_REGION>
        <IVSHMEM_REGION>
          <NAME>cf_ivc2</NAME>
          <PROVIDED_BY>Hypervisor</PROVIDED_BY>
          <IVSHMEM_SIZE>128</IVSHMEM_SIZE>
          <IVSHMEM_VMS>
            <IVSHMEM_VM>
              <VM_NAME>Service_VM</VM_NAME>
              <VBDF>00:1a.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>Vehicle_VM</VM_NAME>
              <VBDF>00:1a.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>AD_VM</VM_NAME>
              <VBDF>00:1a.0</VBDF>
            </IVSHMEM_VM>
          </IVSHMEM_VMS>
        </IVSHMEM_REGION>
        <IVSHMEM_REGION>
          <NAME>cf_ivc3</NAME>
          <PROVIDED_BY>Hypervisor</PROVIDED_BY>
          <IVSHMEM_SIZE>128</IVSHMEM_SIZE>
          <IVSHMEM_VMS>
            <IVSHMEM_VM>
              <VM_NAME>Service_VM</VM_NAME>
              <VBDF>00:1b.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>Vehicle_VM</VM_NAME>
              <VBDF>00:1b.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>AD_VM</VM_NAME>
              <VBDF>00:1b.0</VBDF>
            </IVSHMEM_VM>
          </IVSHMEM_VMS>
        </IVSHMEM_REGION>
        <IVSHMEM_REGION>
          <NAME>cf_ivc4</NAME>
          <PROVIDED_BY>Hypervisor</PROVIDED_BY>
          <IVSHMEM_SIZE>64</IVSHMEM_SIZE>
          <IVSHMEM_VMS>
            <IVSHMEM_VM>
              <VM_NAME>Service_VM</VM_NAME>
              <VBDF>00:1c.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>Vehicle_VM</VM_NAME>
              <VBDF>00:1c.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>AD_VM</VM_NAME>
              <VBDF>00:1c.0</VBDF>
            </IVSHMEM_VM>
          </IVSHMEM_VMS>
        </IVSHMEM_REGION>
        <IVSHMEM_REGION>
          <NAME>cf_ivc5</NAME>
          <PROVIDED_BY>Hypervisor</PROVIDED_BY>
          <IVSHMEM_SIZE>64</IVSHMEM_SIZE>
          <IVSHMEM_VMS>
            <IVSHMEM_VM>
              <VM_NAME>Service_VM</VM_NAME>
              <VBDF>00:11.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>Vehicle_VM</VM_NAME>
              <VBDF>00:11.0</VBDF>
            </IVSHMEM_VM>
            <IVSHMEM_VM>
              <VM_NAME>AD_VM</VM_NAME>
              <VBDF>00:11.0</VBDF>
            </IVSHMEM_VM>
          </IVSHMEM_VMS>
        </IVSHMEM_REGION>
      </IVSHMEM>
      <RELOC_ENABLED>y</RELOC_ENABLED>
      <SCHEDULER>SCHED_BVT</SCHEDULER>
      <MULTIBOOT2_ENABLED>y</MULTIBOOT2_ENABLED>
      <SPLIT_LOCK_DETECTION_ENABLED>n</SPLIT_LOCK_DETECTION_ENABLED>
      <UC_LOCK_DETECTION_ENABLED>n</UC_LOCK_DETECTION_ENABLED>
      <SECURITY_VM_FIXUP>n</SECURITY_VM_FIXUP>
      <HYPERV_ENABLED>y</HYPERV_ENABLED>
      <ACPI_PARSE_ENABLED>y</ACPI_PARSE_ENABLED>
      <L1D_VMENTRY_ENABLED>n</L1D_VMENTRY_ENABLED>
      <MCE_ON_PSC_ENABLED>y</MCE_ON_PSC_ENABLED>
      <CPU_PERFORMANCE_POLICY>Performance</CPU_PERFORMANCE_POLICY>
      <RDT>
        <RDT_ENABLED>n</RDT_ENABLED>
        <CDP_ENABLED>n</CDP_ENABLED>
        <VCAT_ENABLED>n</VCAT_ENABLED>
      </RDT>
      <KEEP_IRQ_DISABLED>n</KEEP_IRQ_DISABLED>
      <IOMMU_ENFORCE_SNP>n</IOMMU_ENFORCE_SNP>
    </FEATURES>
    <DEBUG_OPTIONS>
      <SERIAL_CONSOLE>/dev/ttyS4</SERIAL_CONSOLE>
      <MEM_LOGLEVEL>5</MEM_LOGLEVEL>
      <NPK_LOGLEVEL>5</NPK_LOGLEVEL>
      <CONSOLE_LOGLEVEL>5</CONSOLE_LOGLEVEL>
    </DEBUG_OPTIONS>
    <MEMORY>
      <STACK_SIZE>0x2000</STACK_SIZE>
    </MEMORY>
    <CAPACITIES>
      <MAX_PCI_DEV_NUM>256</MAX_PCI_DEV_NUM>
      <MAX_PT_IRQ_ENTRIES>256</MAX_PT_IRQ_ENTRIES>
      <MAX_MSIX_TABLE_NUM>256</MAX_MSIX_TABLE_NUM>
      <MAX_EMULATED_MMIO>72</MAX_EMULATED_MMIO>
      <MAX_VM_NUM>4</MAX_VM_NUM>
      <MAX_IOAPIC_NUM>1</MAX_IOAPIC_NUM>
      <MAX_PCI_BUS_NUM>0</MAX_PCI_BUS_NUM>
      <MAX_IOAPIC_LINES>120</MAX_IOAPIC_LINES>
    </CAPACITIES>
    <MISC_CFG>
      <GPU_SBDF>0x00000010</GPU_SBDF>
    </MISC_CFG>
  </hv>
  <vm id="0">
    <lapic_passthrough>n</lapic_passthrough>
    <nested_virtualization_support>n</nested_virtualization_support>
    <vm_type>STANDARD_VM</vm_type>
    <console_vuart>COM Port 1</console_vuart>
    <os_config>
      <kern_type>KERNEL_BZIMAGE</kern_type>
      <kern_mod>Linux_bzImage</kern_mod>
      <bootargs>rw rootwait root=/dev/nvme0n1p2 console=tty0 console=ttyS0 consoleblank=0 no_timer_check quiet swiotlb=131072 i915.nuclear_pageflip=1 i915.force_probe=* i915.enable_guc=0x7 loglevel=7 earlyprintk=ttyS0 pcie_aspm=off</bootargs>
    </os_config>
    <load_order>SERVICE_VM</load_order>
    <name>Service_VM</name>
    <own_pcpu>n</own_pcpu>
    <priority>PRIO_LOW</priority>
    <companion_vmid>65535</companion_vmid>
  </vm>
  <vm id="1">
    <vm_type>STANDARD_VM</vm_type>
    <console_vuart>COM Port 1</console_vuart>
    <os_type>Non-Windows OS</os_type>
    <vuart0>n</vuart0>
    <vbootloader>y</vbootloader>
    <memory>
      <size>32768</size>
    </memory>
    <cpu_affinity>
      <pcpu>
        <pcpu_id>4</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>5</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>6</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>7</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>8</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>9</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>10</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>11</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
    </cpu_affinity>
    <usb_xhci>
      <usb_dev>3-5 Right Lower USB Port</usb_dev>
    </usb_xhci>
    <pci_devs>
      <pci_dev>00:02.1 VGA compatible controller: Intel Corporation Raptor Lake-P [Iris Xe Graphics]</pci_dev>
    </pci_devs>
    <virtio_devices>
      <gpu>
        <display_type>Full screen</display_type>
        <displays>
          <display>
            <monitor_id>1</monitor_id>
          </display>
        </displays>
      </gpu>
      <console>
        <use_type>Virtio console</use_type>
        <backend_type>stdio</backend_type>
      </console>
      <network>
        <virtio_framework>User space based (VBSU)</virtio_framework>
        <interface_name>tap1</interface_name>
      </network>
      <block>/opt/sdv/vm/vehicle_vm.img</block>
    </virtio_devices>
    <load_order>POST_LAUNCHED_VM</load_order>
    <name>Vehicle_VM</name>
    <own_pcpu>n</own_pcpu>
    <secure_world_support>n</secure_world_support>
    <priority>PRIO_LOW</priority>
    <companion_vmid>65535</companion_vmid>
  </vm>
  <vm id="2">
    <vm_type>STANDARD_VM</vm_type>
    <console_vuart>COM Port 1</console_vuart>
    <os_type>Non-Windows OS</os_type>
    <vuart0>n</vuart0>
    <vbootloader>y</vbootloader>
    <memory>
      <size>8192</size>
    </memory>
    <cpu_affinity>
      <pcpu>
        <pcpu_id>12</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>13</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>14</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>15</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
    </cpu_affinity>
    <virtio_devices>
      <console>
        <use_type>Virtio console</use_type>
        <backend_type>stdio</backend_type>
      </console>
      <network>
        <virtio_framework>User space based (VBSU)</virtio_framework>
        <interface_name>tap2</interface_name>
      </network>
      <block>/opt/sdv/vm/ad_vm.img</block>
    </virtio_devices>
    <load_order>POST_LAUNCHED_VM</load_order>
    <name>AD_VM</name>
    <own_pcpu>n</own_pcpu>
    <secure_world_support>n</secure_world_support>
    <priority>PRIO_LOW</priority>
    <companion_vmid>65535</companion_vmid>
  </vm>
  <vm id="3">
    <vm_type>STANDARD_VM</vm_type>
    <console_vuart>COM Port 1</console_vuart>
    <os_type>Non-Windows OS</os_type>
    <vuart0>n</vuart0>
    <vbootloader>y</vbootloader>
    <memory>
      <size>8192</size>
    </memory>
    <cpu_affinity>
      <pcpu>
        <pcpu_id>16</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>17</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>18</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
      <pcpu>
        <pcpu_id>19</pcpu_id>
        <real_time_vcpu>n</real_time_vcpu>
      </pcpu>
    </cpu_affinity>
    <usb_xhci>
      <usb_dev>3-6 Right Upper USB Port</usb_dev>
    </usb_xhci>
    <pci_devs>
      <pci_dev>00:02.2 VGA compatible controller: Intel Corporation Raptor Lake-P [Iris Xe Graphics]</pci_dev>
    </pci_devs>
    <virtio_devices>
      <gpu>
        <display_type>Full screen</display_type>
        <displays>
          <display>
            <monitor_id>2</monitor_id>
          </display>
        </displays>
      </gpu>
      <console>
        <use_type>Virtio console</use_type>
        <backend_type>stdio</backend_type>
      </console>
      <network>
        <virtio_framework>User space based (VBSU)</virtio_framework>
        <interface_name>tap3</interface_name>
      </network>
      <block>/opt/sdv/vm/android_vm.img</block>
    </virtio_devices>
    <load_order>POST_LAUNCHED_VM</load_order>
    <name>Android_VM</name>
    <own_pcpu>n</own_pcpu>
    <secure_world_support>n</secure_world_support>
    <priority>PRIO_LOW</priority>
    <companion_vmid>65535</companion_vmid>
  </vm>
</acrn-config>
